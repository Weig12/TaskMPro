/* Basic Reset */
* { box-sizing: border-box; }
html, body { margin: 0; padding: 0; }
body {
  font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
  background: linear-gradient(135deg,#f5f7fa,#c3cfe2);
  min-height: 100vh;
  color: #1f2d3d;
  display: flex;
  flex-direction: column;
}

:root {
  --accent: #2563eb;
  --accent-hover: #1d4ed8;
  --danger: #dc2626;
  --danger-hover: #b91c1c;
  --border: #d0d7e2;
  --bg-card: #ffffffdd;
  --radius: 10px;
  --transition: .18s cubic-bezier(.4,0,.2,1);
  --bg-gradient: linear-gradient(135deg,#f5f7fa,#c3cfe2);
  --text: #1f2d3d;
  --text-dim: #4a5568;
  --task-completed-opacity: .7;
}

[data-theme="dark"] {
  --accent: #3b82f6;
  --accent-hover: #2563eb;
  --danger: #ef4444;
  --danger-hover: #dc2626;
  --border: #2c3644;
  --bg-card: #1f2937dd;
  --bg-gradient: linear-gradient(135deg,#0f172a,#1e293b);
  --text: #f1f5f9;
  --text-dim: #94a3b8;
  --task-completed-opacity: .45;
}

html[data-theme="dark"] body { background: var(--bg-gradient); color: var(--text); }
html[data-theme="dark"] .tagline { color: var(--text-dim); }
html[data-theme="dark"] .empty-state { color: var(--text-dim); }
html[data-theme="dark"] .task-item { box-shadow: 0 2px 10px -2px rgba(0,0,0,.6); }

.visually-hidden {
  position: absolute !important;
  width: 1px; height: 1px; padding: 0; margin: -1px;
  overflow: hidden; clip: rect(0 0 0 0); white-space: nowrap; border: 0;
}

.app-header { text-align: center; padding: 2rem 1rem 1rem; }
.app-header h1 { margin: 0 0 .25rem; font-size: clamp(1.8rem,4vw,2.4rem); letter-spacing: .5px; }
.tagline { margin: 0; color: var(--text-dim); font-size: .95rem; }

.top-utils { display: flex; gap: .5rem; justify-content: center; margin-top: .75rem; flex-wrap: wrap; }
.top-utils button { font-size: .8rem; padding: .6rem .95rem; }

main { width: 100%; max-width: 860px; margin: 0 auto; padding: 0 1rem 3rem; flex: 1; }
.add-task-section { background: var(--bg-card); backdrop-filter: blur(6px); padding: 1rem; border-radius: var(--radius); box-shadow: 0 4px 16px -4px rgba(0,0,0,.08); }

#task-form { display: flex; gap: .75rem; flex-wrap: wrap; }
#task-form #due-input { padding: .85rem .8rem; border: 2px solid var(--border); border-radius: var(--radius); background: #fff; font: inherit; }
html[data-theme="dark"] #task-form #due-input { background: #0f172a; color: var(--text); }
#task-input {
  flex: 1;
  padding: .85rem 1rem;
  border: 2px solid var(--border);
  border-radius: var(--radius);
  font-size: 1rem;
  background: #fff;
  transition: var(--transition);
}
#task-input:focus { outline: none; border-color: var(--accent); box-shadow: 0 0 0 3px rgba(37,99,235,.25); }

button { cursor: pointer; font: inherit; }
#add-btn, .secondary, .filter-btn {
  background: var(--accent);
  color: #fff;
  padding: .85rem 1.25rem;
  border: none;
  border-radius: var(--radius);
  font-weight: 600;
  display: inline-flex; align-items: center; gap: .4rem;
  transition: var(--transition);
}
#add-btn:hover, #add-btn:focus, .secondary:hover, .secondary:focus, .filter-btn:hover, .filter-btn:focus { background: var(--accent-hover); }
.secondary { background: #64748b; }
.secondary:hover, .secondary:focus { background: #475569; }

.filter-btn { background: #64748b; font-size: .8rem; }
.filter-btn.active { box-shadow: 0 0 0 3px rgba(37,99,235,.35) inset; }

.controls { margin-top: 1.25rem; display: flex; gap: 1rem; flex-wrap: wrap; align-items: center; background: var(--bg-card); backdrop-filter: blur(6px); padding: .75rem .9rem; border-radius: var(--radius); box-shadow: 0 4px 14px -4px rgba(0,0,0,.1); }
.search-wrap input, .sort-wrap select { padding: .65rem .75rem; border: 2px solid var(--border); border-radius: var(--radius); background: #fff; font: inherit; }
.search-wrap input:focus, .sort-wrap select:focus { outline: none; border-color: var(--accent); box-shadow: 0 0 0 3px rgba(37,99,235,.25); }
html[data-theme="dark"] .search-wrap input, html[data-theme="dark"] .sort-wrap select { background: #0f172a; color: var(--text); }

.message { min-height: 1.25rem; font-size: .85rem; color: #dc2626; padding-left: .25rem; }

.tasks-section { margin-top: 1.5rem; }
.tasks-header { display: flex; justify-content: space-between; align-items: center; gap: 1rem; }
.tasks-header h2 { margin: 0; font-size: 1.3rem; }

.task-list { list-style: none; margin: 1rem 0 0; padding: 0; display: grid; gap: .65rem; }
.task-item { background: var(--bg-card); border: 1px solid var(--border); border-radius: var(--radius); padding: .55rem .65rem .55rem .65rem; display: flex; align-items: center; gap: .75rem; position: relative; box-shadow: 0 2px 8px -2px rgba(0,0,0,.05); transition: var(--transition); }
.task-item:hover { border-color: #b8c2d1; }
.task-item.dragging { opacity: .4; }
.task-item.drag-over { outline: 2px dashed var(--accent); }
.task-item.completed { opacity: var(--task-completed-opacity); }
.task-item.completed .task-text { text-decoration: line-through; }

.checkbox-wrap { display: flex; align-items: center; }
.task-checkbox { width: 1.1rem; height: 1.1rem; cursor: pointer; }
.task-text { flex: 1; line-height: 1.3; }
.task-text.editing { background: #fff3; outline: 2px solid var(--accent); border-radius: 6px; padding: .2rem .35rem; }
.edit-input { flex: 1; font: inherit; padding: .45rem .55rem; border-radius: 6px; border: 2px solid var(--border); }
.edit-input:focus { outline: none; border-color: var(--accent); box-shadow: 0 0 0 3px rgba(37,99,235,.25); }

.drag-handle { cursor: grab; font-size: .95rem; line-height: 1; user-select: none; padding: .35rem .45rem; border-radius: 6px; background: transparent; color: var(--text-dim); }
.drag-handle:active { cursor: grabbing; }
html[data-theme="dark"] .drag-handle { color: var(--text-dim); }

.delete-btn { background: var(--danger); color: #fff; border: none; padding: .45rem .7rem; border-radius: 8px; font-size: .7rem; font-weight: 600; transition: var(--transition); }
.delete-btn:hover, .delete-btn:focus { background: var(--danger-hover); }

.empty-state { margin-top: 1rem; font-size: .9rem; color: var(--text-dim); text-align: center; }
.empty-state.hidden { display: none; }

.app-footer { text-align: center; padding: 2rem 1rem 1.5rem; font-size: .75rem; color: var(--text-dim); }

.stats-section { margin-top: 1.25rem; }
.stats { background: var(--bg-card); padding: .75rem 1rem; border-radius: var(--radius); font-size: .8rem; display: flex; gap: 1rem; flex-wrap: wrap; }
.stats span { white-space: nowrap; }

html[data-theme="dark"] #task-input, html[data-theme="dark"] .edit-input { background: #0f172a; color: var(--text); }

/* Transitions for theme */
html { transition: background-color .3s ease, color .3s ease; }
body { background: var(--bg-gradient); transition: background .4s ease; }

/* PWA install hint placeholder (if needed later) */
.pwa-install-banner { display: none; }

/* Responsive tweaks */
@media (max-width: 600px) {
  #task-form { flex-direction: column; }
  #add-btn { width: 100%; }
  .tasks-header { flex-direction: column; align-items: stretch; }
  .tasks-header button { width: 100%; }
  .controls { flex-direction: column; }
  .stats { flex-direction: column; align-items: flex-start; }
}
